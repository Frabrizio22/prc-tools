<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peptide Reconstitution Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #0a0a14;
            color: #ffffff;
            padding: 20px;
            line-height: 1.6;
        }

        .calculator-container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #4a90d9;
            margin-bottom: 10px;
            font-size: 28px;
            font-weight: 700;
        }

        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }

        .preset-btn {
            background: linear-gradient(135deg, #1a1a2e 0%, #141428 100%);
            border: 2px solid #4a90d9;
            color: #4a90d9;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
        }

        .preset-btn:hover {
            background: linear-gradient(135deg, #4a90d9 0%, #3a7bc4 100%);
            color: #0a0a14;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 217, 0.3);
        }

        .preset-btn:active {
            transform: translateY(0);
        }

        .input-section {
            background: rgba(42, 42, 78, 0.5);
            border: 1px solid rgba(74, 144, 217, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #4a90d9;
            font-weight: 600;
            font-size: 14px;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px 16px;
            background: #1a1a2e;
            border: 2px solid rgba(74, 144, 217, 0.3);
            border-radius: 8px;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #4a90d9;
            box-shadow: 0 0 0 3px rgba(74, 144, 217, 0.2);
        }

        input[type="number"]::placeholder {
            color: #666;
        }

        .results-section {
            background: linear-gradient(135deg, rgba(74, 144, 217, 0.1) 0%, rgba(42, 42, 78, 0.3) 100%);
            border: 2px solid #4a90d9;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .results-title {
            color: #4a90d9;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }

        .result-item {
            background: rgba(26, 26, 46, 0.6);
            border-left: 4px solid #4a90d9;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 6px;
        }

        .result-item:last-child {
            margin-bottom: 0;
        }

        .result-label {
            color: #aaa;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .result-value {
            color: #4a90d9;
            font-size: 24px;
            font-weight: 700;
        }

        .syringe-container {
            background: rgba(42, 42, 78, 0.3);
            border: 1px solid rgba(74, 144, 217, 0.2);
            border-radius: 12px;
            padding: 30px 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .syringe-title {
            color: #4a90d9;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        #syringeCanvas {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .how-to-section {
            background: rgba(42, 42, 78, 0.3);
            border: 1px solid rgba(74, 144, 217, 0.2);
            border-radius: 12px;
            padding: 25px;
        }

        .how-to-section h2 {
            color: #4a90d9;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .how-to-section h3 {
            color: #4a90d9;
            font-size: 16px;
            font-weight: 600;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .how-to-section p {
            color: #ccc;
            margin-bottom: 15px;
            font-size: 14px;
            line-height: 1.8;
        }

        .how-to-section ol {
            color: #ccc;
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .how-to-section li {
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.8;
        }

        .warning {
            background: rgba(74, 144, 217, 0.1);
            border-left: 4px solid #4a90d9;
            padding: 15px;
            margin-top: 20px;
            border-radius: 6px;
            font-size: 13px;
            color: #4a90d9;
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 24px;
            }

            .presets {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-value {
                font-size: 20px;
            }

            body {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <h1>üíâ Peptide Reconstitution Calculator</h1>
        <p class="subtitle">Calculate accurate dosing for your peptide therapy</p>

        <div class="presets">
            <button class="preset-btn" onclick="setPreset(5, 'BPC-157')">BPC-157<br>5mg</button>
            <button class="preset-btn" onclick="setPreset(2, 'Semaglutide')">Semaglutide<br>2mg</button>
            <button class="preset-btn" onclick="setPreset(5, 'Tirzepatide')">Tirzepatide<br>5mg</button>
            <button class="preset-btn" onclick="setPreset(4, 'Retatrutide')">Retatrutide<br>4mg</button>
            <button class="preset-btn" onclick="setPreset(2, 'CJC-1295')">CJC-1295<br>2mg</button>
            <button class="preset-btn" onclick="setPreset(5, 'Ipamorelin')">Ipamorelin<br>5mg</button>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="peptideAmount">Peptide Amount (mg)</label>
                <input type="number" id="peptideAmount" placeholder="Enter amount in mg" step="0.1" min="0" oninput="calculate()">
            </div>
            <div class="input-group">
                <label for="waterAmount">Bacteriostatic Water Added (mL)</label>
                <input type="number" id="waterAmount" placeholder="Enter volume in mL" step="0.1" min="0" oninput="calculate()">
            </div>
            <div class="input-group">
                <label for="desiredDose">Desired Dose (mcg)</label>
                <input type="number" id="desiredDose" placeholder="Enter desired dose in mcg" step="1" min="0" oninput="calculate()">
            </div>
        </div>

        <div class="results-section" id="results" style="display: none;">
            <div class="results-title">üìä Your Dosing Results</div>
            <div class="result-item">
                <div class="result-label">Concentration per Unit</div>
                <div class="result-value" id="concentrationPerUnit">-</div>
            </div>
            <div class="result-item">
                <div class="result-label">Units to Draw</div>
                <div class="result-value" id="unitsToDraw">-</div>
            </div>
            <div class="result-item">
                <div class="result-label">mL to Draw</div>
                <div class="result-value" id="mlToDraw">-</div>
            </div>
        </div>

        <div class="syringe-container" id="syringeContainer" style="display: none;">
            <div class="syringe-title">Visual Syringe Guide</div>
            <svg id="syringeCanvas" width="400" height="300" viewBox="0 0 400 300">
                <!-- Needle -->
                <rect x="330" y="140" width="60" height="4" fill="#888" stroke="#666" stroke-width="1"/>
                <polygon points="390,140 400,142 390,144" fill="#666"/>
                
                <!-- Syringe barrel -->
                <rect x="80" y="100" width="250" height="84" fill="#e8e8e8" stroke="#999" stroke-width="2" rx="4"/>
                
                <!-- Inner barrel (white background) -->
                <rect x="85" y="105" width="240" height="74" fill="#ffffff" stroke="#ccc" stroke-width="1" rx="2"/>
                
                <!-- Graduation marks and labels -->
                <g id="graduations">
                    <!-- Generate marks every 10 units from 0 to 100 -->
                </g>
                
                <!-- Liquid fill (will be animated) -->
                <rect id="liquidFill" x="85" y="105" width="0" height="74" fill="#4a90d9" opacity="0.8" rx="2">
                    <animate id="liquidAnimation" attributeName="width" dur="0.5s" fill="freeze"/>
                </rect>
                
                <!-- Plunger -->
                <g id="plunger">
                    <rect id="plungerBody" x="50" y="120" width="35" height="44" fill="#666" stroke="#444" stroke-width="2" rx="2"/>
                    <rect id="plungerSeal" x="82" y="115" width="6" height="54" fill="#333" stroke="#222" stroke-width="1"/>
                    <circle cx="67" cy="142" r="8" fill="#888" stroke="#666" stroke-width="2"/>
                </g>
                
                <!-- Tip connector -->
                <path d="M 325 130 L 335 140 L 335 144 L 325 154 Z" fill="#ddd" stroke="#999" stroke-width="1"/>
                
                <!-- Center mark on syringe -->
                <line x1="80" y1="142" x2="330" y2="142" stroke="#ccc" stroke-width="1" opacity="0.5"/>
            </svg>
        </div>

        <div class="how-to-section">
            <h2>üìö How to Use This Calculator</h2>
            
            <h3>Quick Start</h3>
            <ol>
                <li><strong>Select a preset</strong> or enter your peptide amount in milligrams (mg)</li>
                <li><strong>Enter the amount of bacteriostatic water</strong> you'll add to reconstitute</li>
                <li><strong>Enter your desired dose</strong> in micrograms (mcg)</li>
                <li><strong>View your results</strong> - the calculator shows concentration and exactly how much to draw</li>
            </ol>

            <h3>Understanding Reconstitution</h3>
            <p>Peptides typically arrive as lyophilized (freeze-dried) powder. To use them, you must reconstitute by adding bacteriostatic water. This process creates a liquid solution with a specific concentration.</p>

            <p><strong>Example:</strong> If you have 5mg of BPC-157 and add 2mL of bacteriostatic water, your concentration is 2,500 mcg/mL or 25 mcg per unit on an insulin syringe.</p>

            <h3>Reading an Insulin Syringe</h3>
            <p>Standard insulin syringes are 1mL total volume with 100 unit markings. Each unit = 0.01mL. The visual guide above shows exactly where to draw your dose.</p>

            <h3>Best Practices</h3>
            <p>‚úì Always use bacteriostatic water (not sterile water)<br>
            ‚úì Inject water slowly down the side of the vial<br>
            ‚úì Never shake - gently swirl to mix<br>
            ‚úì Store reconstituted peptides in the refrigerator<br>
            ‚úì Use within 30 days of reconstitution<br>
            ‚úì Always verify your calculations before injecting</p>

            <div class="warning">
                <strong>‚ö†Ô∏è Medical Disclaimer:</strong> This calculator is for educational purposes only. Always consult with a qualified healthcare provider before starting any peptide therapy. Verify all calculations independently before administration.
            </div>
        </div>
    </div>

    <script>
        // Generate graduation marks
        function initializeSyringe() {
            const graduations = document.getElementById('graduations');
            const barrelStart = 85;
            const barrelWidth = 240;
            
            // Create marks for 0, 10, 20, ... 100 units
            for (let i = 0; i <= 10; i++) {
                const units = i * 10;
                const x = barrelStart + (units / 100) * barrelWidth;
                
                // Tick mark
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', x);
                line.setAttribute('y1', '100');
                line.setAttribute('x2', x);
                line.setAttribute('y2', '110');
                line.setAttribute('stroke', '#666');
                line.setAttribute('stroke-width', '2');
                graduations.appendChild(line);
                
                // Label
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', x);
                text.setAttribute('y', '95');
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('font-size', '12');
                text.setAttribute('fill', '#666');
                text.setAttribute('font-weight', '600');
                text.textContent = units;
                graduations.appendChild(text);
                
                // Bottom tick
                const line2 = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line2.setAttribute('x1', x);
                line2.setAttribute('y1', '184');
                line2.setAttribute('x2', x);
                line2.setAttribute('y2', '194');
                line2.setAttribute('stroke', '#666');
                line2.setAttribute('stroke-width', '2');
                graduations.appendChild(line2);
            }
        }

        function setPreset(amount, name) {
            document.getElementById('peptideAmount').value = amount;
            calculate();
        }

        function calculate() {
            const peptideAmount = parseFloat(document.getElementById('peptideAmount').value);
            const waterAmount = parseFloat(document.getElementById('waterAmount').value);
            const desiredDose = parseFloat(document.getElementById('desiredDose').value);

            // Validate inputs
            if (!peptideAmount || !waterAmount || !desiredDose || 
                peptideAmount <= 0 || waterAmount <= 0 || desiredDose <= 0) {
                document.getElementById('results').style.display = 'none';
                document.getElementById('syringeContainer').style.display = 'none';
                return;
            }

            // Calculate concentration
            const concentrationMcgPerMl = (peptideAmount * 1000) / waterAmount;
            const concentrationPerUnit = concentrationMcgPerMl / 100; // 1mL = 100 units
            
            // Calculate dosing
            const unitsToDraw = desiredDose / concentrationPerUnit;
            const mlToDraw = unitsToDraw / 100;

            // Display results
            document.getElementById('concentrationPerUnit').textContent = `${concentrationPerUnit.toFixed(2)} mcg/unit`;
            document.getElementById('unitsToDraw').textContent = `${unitsToDraw.toFixed(1)} units`;
            document.getElementById('mlToDraw').textContent = `${mlToDraw.toFixed(3)} mL`;
            
            document.getElementById('results').style.display = 'block';
            document.getElementById('syringeContainer').style.display = 'block';

            // Update syringe visualization
            updateSyringe(unitsToDraw);
        }

        function updateSyringe(units) {
            // Clamp units to 0-100 range for display
            const displayUnits = Math.min(Math.max(units, 0), 100);
            
            const barrelStart = 85;
            const barrelWidth = 240;
            const fillWidth = (displayUnits / 100) * barrelWidth;
            
            // Animate liquid fill
            const liquidFill = document.getElementById('liquidFill');
            const animation = document.getElementById('liquidAnimation');
            
            animation.setAttribute('from', liquidFill.getAttribute('width') || '0');
            animation.setAttribute('to', fillWidth);
            animation.beginElement();
            
            // Update plunger position
            const plungerBody = document.getElementById('plungerBody');
            const plungerSeal = document.getElementById('plungerSeal');
            const plunger = document.getElementById('plunger');
            
            // Plunger moves from right to left as liquid increases
            const plungerX = barrelStart + fillWidth - 6;
            plungerSeal.setAttribute('x', plungerX);
            plungerBody.setAttribute('x', plungerX - 32);
            
            // Update plunger circle
            const circle = plunger.querySelector('circle');
            circle.setAttribute('cx', plungerX - 15);
        }

        // Initialize syringe on page load
        window.addEventListener('load', initializeSyringe);
    </script>
</body>
</html>
